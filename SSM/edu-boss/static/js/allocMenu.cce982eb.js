(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["allocMenu"],{"2b98":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[n("el-tree",{ref:"tree",attrs:{data:e.menuTreeList,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}}),n("div",{staticStyle:{"margin-top":"20px"},attrs:{align:"center"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSave()}}},[e._v("保存")]),n("el-button",{on:{click:function(t){return e.handleClear()}}},[e._v("清空")])],1)],1)},o=[],a=(n("4de4"),n("ed08")),c={name:"allocMenu",title:"角色菜单管理",data:function(){return{menuTreeList:[],checkedMenuId:[],defaultProps:{children:"subMenuList",label:"name"},roleId:null}},created:function(){this.roleId=this.$route.query.roleId,this.treeList(),this.getRoleMenu(this.roleId)},methods:{treeList:function(){var e=this;return a["b"].get("/role/findAllMenu").then((function(t){console.log(t.data.content),e.menuTreeList=t.data.content.parentMenuList})).catch()},getRoleMenu:function(e){var t=this;return a["b"].get("/role/findMenuByRoleId?roleId="+e).then((function(e){console.log(e.data.content),t.$refs.tree.setCheckedKeys(e.data.content)})).catch()},handleSave:function(){var e=this,t=this.$refs.tree.getCheckedNodes(),n=[];if(null!=t&&t.length>0)for(var r=function(e){var r=t[e];n.push(r.id),-1!==r.parentId&&0===n.filter((function(e){return r.parentId})).length&&n.push(r.parentId)},o=0;o<t.length;o++)r(o);this.$confirm("是否分配菜单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={roleId:e.roleId,menuIdList:n};return a["b"].post("/role/RoleContextMenu",t).then((function(t){e.$router.back()})).catch((function(t){e.$message.error("菜单权限分配失败！")}))})).catch((function(){}))},handleClear:function(){this.$refs.tree.setCheckedKeys([])}}},l=c,i=n("2877"),u=Object(i["a"])(l,r,o,!1,null,"7bc9c95e",null);t["default"]=u.exports}}]);